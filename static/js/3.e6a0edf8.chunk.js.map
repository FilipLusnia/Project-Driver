{"version":3,"sources":["components/Redux/Actions/forumActions.js","components/Articles/ChosenArticle.js"],"names":["sendComment","text","creds","dispatch","getState","getFirebase","firestore","collection","add","name","userName","surname","userSurname","comment","date","Date","then","type","catch","err","sendReply","commId","doc","reply","compose","connect","state","fbauth","firebase","auth","articles","data","profile","firestoreConnect","props","history","useHistory","useState","commentText","setCommentText","articleName","match","params","articlename","currentArticle","img","className","title","thumbText","src","alt","href","target","rel","uid","to","onChange","e","value","onClick","preventDefault","length","push","color","height"],"mappings":"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","file":"static/js/3.e6a0edf8.chunk.js","sourcesContent":["export const sendComment = (text, creds) => {\r\n    return (dispatch, getState, {getFirebase}) => {\r\n        const firebase = getFirebase();\r\n        const firestore = firebase.firestore();\r\n\r\n        firestore.collection('comments').add({\r\n            name: creds.userName,\r\n            surname: creds.userSurname,\r\n            comment: text,\r\n            date: new Date()\r\n        })\r\n        .then(() => dispatch({\r\n            type: 'COMMENT_SEND_SUCCES'\r\n        }))\r\n        .catch(err => dispatch({\r\n            type: 'COMMENT_SEND_FAIL', \r\n            err\r\n        }))\r\n    }\r\n}\r\n\r\nexport const sendReply = (text, creds, commId) => {\r\n    return (dispatch, getState, {getFirebase}) => {\r\n        const firebase = getFirebase();\r\n        const firestore = firebase.firestore();\r\n\r\n        firestore.collection('comments').doc(commId).collection('replies').add({\r\n            name: creds.userName,\r\n            surname: creds.userSurname,\r\n            reply: text,\r\n            date: new Date()\r\n        })\r\n        .then(() => dispatch({\r\n            type: 'REPLY_SEND_SUCCES'\r\n        }))\r\n        .catch(err => dispatch({\r\n            type: 'REPLY_SEND_FAIL', \r\n            err\r\n        }))\r\n    }\r\n}","import React, {useState} from 'react';\r\nimport {\r\n  Link,\r\n  useHistory\r\n} from \"react-router-dom\";\r\nimport {connect} from 'react-redux';\r\nimport {compose} from 'redux';\r\nimport {firestoreConnect} from 'react-redux-firebase';\r\n\r\nimport Navigation from '../Navigation/Navigation';\r\nimport Footer from '../Navigation/Footer';\r\nimport {sendComment} from '../Redux/Actions/forumActions';\r\n\r\nimport Loader from 'react-loader-spinner';\r\n\r\n\r\nfunction ChosenArticle(props) {\r\n\r\n  const history = useHistory();\r\n\r\n  const [commentText, setCommentText] = useState(true);\r\n\r\n  const {articles, fbauth} = props;\r\n  const articleName = props.match.params.articlename;\r\n  const currentArticle = articles?.[articleName];\r\n\r\n  const handleChange = e => {\r\n    setCommentText(e.target.value);\r\n  }\r\n\r\n  const handleClick = e => {\r\n    e.preventDefault();\r\n\r\n    const creds = {\r\n      userName: props.userName, \r\n      userSurname: props.userSurname\r\n    }\r\n\r\n    if(commentText?.length > 0 && props.userName && props.userSurname){\r\n      props.sendComment(commentText, creds);\r\n      history.push('/forum');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navigation/>\r\n      <div>\r\n        {\r\n        (currentArticle && currentArticle.img) ?\r\n          <div className=\"chosen_article_container\">\r\n            <h1 className=\"chosen_article_title\">{currentArticle.title}</h1>\r\n            <h2 className=\"chosen_article_thumbtext\">{currentArticle.thumbText}</h2>\r\n            <img src={currentArticle.img} alt=\"cover\" className=\"chosen_article_img\"></img>\r\n            <p className=\"chosen_article_source\"> \r\n              Tekst arytkułu pochodzi z tej strony: <a href={currentArticle?.src} target=\"_blank\" rel=\"noopener noreferrer\">link</a>\r\n            </p>\r\n            <p className=\"chosen_article_text\">{currentArticle.text}</p>\r\n\r\n            {fbauth.uid ? \r\n              <>\r\n                <p className=\"chosen_article_bottomtext\">Sprawdź czy pamiętasz przeczytany artykuł i wykonaj quiz:</p>\r\n                <Link to={`/quiz/${articleName}`} className=\"chosen_article_quizbtn\">Wykonaj quiz</Link>\r\n                <p className=\"chosen_article_bottomline\">_____________________</p>\r\n                \r\n                <form className=\"chosen_article_form\">\r\n                  <label className=\"chosen_article_form_label\">\r\n                    Masz pytanie? Zadaj je na forum:\r\n                    <textarea onChange={handleChange} type=\"text\" name=\"name\" className=\"chosen_article_form_textarea\"/>\r\n                  </label>\r\n                  <input onClick={handleClick} type=\"submit\" value=\"Wyślij\" className=\"chosen_article_form_btn\"/>\r\n                </form>\r\n              </>\r\n            :\r\n              <>\r\n                <p className=\"chosen_article_bottomtext\">Aby wykonać quiz sprawdzający wiedzę z artykułu lub zadać pytanie na forum - musisz się zalogować:</p>\r\n                <Link to=\"/login\" className=\"chosen_article_loginbtn\">Zaloguj się</Link>\r\n              </>\r\n            }   \r\n          </div>\r\n        :\r\n          <div className=\"article_list_loader\">\r\n            <Loader type=\"Circles\" color=\"#5365ff\" height={80}/>\r\n          </div>\r\n        }\r\n      </div>\r\n      <Footer/>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    fbauth: state.firebase.auth,\r\n    articles: state.firestore.data.articles,\r\n    userName: state.firebase.profile.name,\r\n    userSurname: state.firebase.profile.surname\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    sendComment: (text, creds) => dispatch(sendComment(text, creds))\r\n  }\r\n}\r\n  \r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([{\r\n    collection: 'articles'\r\n  }])\r\n)(ChosenArticle)"],"sourceRoot":""}